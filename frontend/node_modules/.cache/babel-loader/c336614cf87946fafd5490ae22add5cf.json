{"ast":null,"code":"const refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout']; // Prepare a map style object for diffing\n// If immutable - convert to plain object\n// Work around some issues in older styles that would fail Mapbox's diffing\n\nexport function normalizeStyle(style) {\n  if (!style) {\n    return null;\n  }\n\n  if (typeof style === 'string') {\n    return style;\n  }\n\n  if ('toJS' in style) {\n    style = style.toJS();\n  }\n\n  if (!style.layers) {\n    return style;\n  }\n\n  const layerIndex = {};\n\n  for (const layer of style.layers) {\n    layerIndex[layer.id] = layer;\n  }\n\n  const layers = style.layers.map(layer => {\n    // @ts-expect-error\n    const layerRef = layerIndex[layer.ref];\n    let normalizedLayer = null;\n\n    if ('interactive' in layer) {\n      normalizedLayer = { ...layer\n      }; // Breaks style diffing :(\n\n      delete normalizedLayer.interactive;\n    } // Style diffing doesn't work with refs so expand them out manually before diffing.\n\n\n    if (layerRef) {\n      normalizedLayer = normalizedLayer || { ...layer\n      };\n      delete normalizedLayer.ref; // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/deref.js\n\n      for (const propName of refProps) {\n        if (propName in layerRef) {\n          normalizedLayer[propName] = layerRef[propName];\n        }\n      }\n    }\n\n    return normalizedLayer || layer;\n  }); // Do not mutate the style object provided by the user\n\n  return { ...style,\n    layers\n  };\n}","map":{"version":3,"sources":["/Users/genie/code/chiutzuning/find-museum-app/frontend/node_modules/react-map-gl/dist/esm/utils/style-utils.js"],"names":["refProps","normalizeStyle","style","toJS","layers","layerIndex","layer","id","map","layerRef","ref","normalizedLayer","interactive","propName"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,CAAC,MAAD,EAAS,QAAT,EAAmB,cAAnB,EAAmC,SAAnC,EAA8C,SAA9C,EAAyD,QAAzD,EAAmE,QAAnE,CAAjB,C,CACA;AACA;AACA;;AACA,OAAO,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAClC,MAAI,CAACA,KAAL,EAAY;AACR,WAAO,IAAP;AACH;;AACD,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC3B,WAAOA,KAAP;AACH;;AACD,MAAI,UAAUA,KAAd,EAAqB;AACjBA,IAAAA,KAAK,GAAGA,KAAK,CAACC,IAAN,EAAR;AACH;;AACD,MAAI,CAACD,KAAK,CAACE,MAAX,EAAmB;AACf,WAAOF,KAAP;AACH;;AACD,QAAMG,UAAU,GAAG,EAAnB;;AACA,OAAK,MAAMC,KAAX,IAAoBJ,KAAK,CAACE,MAA1B,EAAkC;AAC9BC,IAAAA,UAAU,CAACC,KAAK,CAACC,EAAP,CAAV,GAAuBD,KAAvB;AACH;;AACD,QAAMF,MAAM,GAAGF,KAAK,CAACE,MAAN,CAAaI,GAAb,CAAiBF,KAAK,IAAI;AACrC;AACA,UAAMG,QAAQ,GAAGJ,UAAU,CAACC,KAAK,CAACI,GAAP,CAA3B;AACA,QAAIC,eAAe,GAAG,IAAtB;;AACA,QAAI,iBAAiBL,KAArB,EAA4B;AACxBK,MAAAA,eAAe,GAAG,EAAE,GAAGL;AAAL,OAAlB,CADwB,CAExB;;AACA,aAAOK,eAAe,CAACC,WAAvB;AACH,KARoC,CASrC;;;AACA,QAAIH,QAAJ,EAAc;AACVE,MAAAA,eAAe,GAAGA,eAAe,IAAI,EAAE,GAAGL;AAAL,OAArC;AACA,aAAOK,eAAe,CAACD,GAAvB,CAFU,CAGV;;AACA,WAAK,MAAMG,QAAX,IAAuBb,QAAvB,EAAiC;AAC7B,YAAIa,QAAQ,IAAIJ,QAAhB,EAA0B;AACtBE,UAAAA,eAAe,CAACE,QAAD,CAAf,GAA4BJ,QAAQ,CAACI,QAAD,CAApC;AACH;AACJ;AACJ;;AACD,WAAOF,eAAe,IAAIL,KAA1B;AACH,GArBc,CAAf,CAjBkC,CAuClC;;AACA,SAAO,EAAE,GAAGJ,KAAL;AAAYE,IAAAA;AAAZ,GAAP;AACH","sourcesContent":["const refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n// Prepare a map style object for diffing\n// If immutable - convert to plain object\n// Work around some issues in older styles that would fail Mapbox's diffing\nexport function normalizeStyle(style) {\n    if (!style) {\n        return null;\n    }\n    if (typeof style === 'string') {\n        return style;\n    }\n    if ('toJS' in style) {\n        style = style.toJS();\n    }\n    if (!style.layers) {\n        return style;\n    }\n    const layerIndex = {};\n    for (const layer of style.layers) {\n        layerIndex[layer.id] = layer;\n    }\n    const layers = style.layers.map(layer => {\n        // @ts-expect-error\n        const layerRef = layerIndex[layer.ref];\n        let normalizedLayer = null;\n        if ('interactive' in layer) {\n            normalizedLayer = { ...layer };\n            // Breaks style diffing :(\n            delete normalizedLayer.interactive;\n        }\n        // Style diffing doesn't work with refs so expand them out manually before diffing.\n        if (layerRef) {\n            normalizedLayer = normalizedLayer || { ...layer };\n            delete normalizedLayer.ref;\n            // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/deref.js\n            for (const propName of refProps) {\n                if (propName in layerRef) {\n                    normalizedLayer[propName] = layerRef[propName];\n                }\n            }\n        }\n        return normalizedLayer || layer;\n    });\n    // Do not mutate the style object provided by the user\n    return { ...style, layers };\n}\n//# sourceMappingURL=style-utils.js.map"]},"metadata":{},"sourceType":"module"}